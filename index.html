<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="refresh" content="60">
    <title>Framboise Stats</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #ffffff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            text-align: center;
            width: 100%;
            max-width: 800px;
        }

        .time {
            font-size: 5rem;
            font-weight: 700;
            letter-spacing: 2px;
            margin-bottom: 10px;
        }

        .date {
            font-size: 2rem;
            font-weight: 300;
            color: #a0a0a0;
            margin-bottom: 40px;
        }

        .weather {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .temperature {
            font-size: 4.5rem;
            font-weight: 700;
        }

        .condition {
            font-size: 1.8rem;
            color: #a0a0a0;
        }

        .location {
            font-size: 1.2rem;
            color: #707070;
            margin-top: 10px;
        }

        .error {
            color: #ff6b6b;
            font-size: 1.5rem;
        }

        /* Adjustments for 7" screen (typically 800x480) */
        @media (max-height: 500px) {
            .time {
                font-size: 4rem;
            }
            .date {
                font-size: 1.5rem;
                margin-bottom: 20px;
            }
            .temperature {
                font-size: 3.5rem;
            }
            .condition {
                font-size: 1.4rem;
            }
            .weather {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="time" id="time">--:--</div>
        <div class="date" id="date">Loading...</div>

        <div class="weather">
            <div class="temperature" id="temperature">--°F</div>
            <div class="condition" id="condition">Loading weather...</div>
            <div class="location">Minneapolis, MN 55402</div>
        </div>
    </div>

    <script>
        // Weather condition codes from Open-Meteo
        const weatherCodes = {
            0: 'Clear sky',
            1: 'Mainly clear',
            2: 'Partly cloudy',
            3: 'Overcast',
            45: 'Foggy',
            48: 'Depositing rime fog',
            51: 'Light drizzle',
            53: 'Moderate drizzle',
            55: 'Dense drizzle',
            56: 'Light freezing drizzle',
            57: 'Dense freezing drizzle',
            61: 'Slight rain',
            63: 'Moderate rain',
            65: 'Heavy rain',
            66: 'Light freezing rain',
            67: 'Heavy freezing rain',
            71: 'Slight snow',
            73: 'Moderate snow',
            75: 'Heavy snow',
            77: 'Snow grains',
            80: 'Slight rain showers',
            81: 'Moderate rain showers',
            82: 'Violent rain showers',
            85: 'Slight snow showers',
            86: 'Heavy snow showers',
            95: 'Thunderstorm',
            96: 'Thunderstorm with slight hail',
            99: 'Thunderstorm with heavy hail'
        };

        function updateDateTime() {
            const now = new Date();

            // Time
            const timeStr = now.toLocaleTimeString('en-US', {
                hour: 'numeric',
                minute: '2-digit',
                hour12: true
            });
            document.getElementById('time').textContent = timeStr;

            // Date
            const dateStr = now.toLocaleDateString('en-US', {
                weekday: 'long',
                month: 'long',
                day: 'numeric',
                year: 'numeric'
            });
            document.getElementById('date').textContent = dateStr;
        }

        async function fetchWeather() {
            try {
                // Coordinates for Minneapolis, MN (zip 55402)
                const lat = 44.98;
                const lon = -93.27;

                const response = await fetch(
                    `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code&temperature_unit=fahrenheit&timezone=America/Chicago`
                );

                if (!response.ok) throw new Error('Weather fetch failed');

                const data = await response.json();
                const temp = Math.round(data.current.temperature_2m);
                const code = data.current.weather_code;
                const condition = weatherCodes[code] || 'Unknown';

                document.getElementById('temperature').textContent = `${temp}°F`;
                document.getElementById('condition').textContent = condition;
            } catch (error) {
                console.error('Weather error:', error);
                document.getElementById('condition').textContent = 'Weather unavailable';
            }
        }

        // Initial load
        updateDateTime();
        fetchWeather();

        // Update time every second for smooth display
        setInterval(updateDateTime, 1000);
    </script>
</body>
</html>
